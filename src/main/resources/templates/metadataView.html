<!DOCTYPE HTML>
<html >
<head th:replace="fragments/head :: head">
    <title>Getting Started: Serving Web Content</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
    <body>
         <script  type='text/javascript'>
            var elements = [
                {link: "/home", value: "Home", active: "true"},
                {link: "/metadata", value: "Metadata", active: "false"},
                {link: "/metadata/uplift", value: "Metadata uplift", active: "false"}];
        </script>
        <script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
        <script th:inline="javascript">
            /*<![CDATA[*/
            var md = /*[[${md}]]*/ 'Sebastian';
            var ind = /*[[${indSon}]]*/ 'Sebastian';
             /*]]>*/
         </script>
         
        <header id="header">
            <div th:insert="fragments/nav :: navbar"></div>
            <h1>Metadata View</h1>
        </header>
        
        <h2 th:unless="${indSon=='noIndSON'}" th:text="${indSon}"> View</h2>
        
        
           <!-- <script  type='text/javascript'>
                for (let step = 0; step < ; step++) {
                    // Runs 5 times, with values of step 0 through 4.
                    console.log('Walking east one step');
                  }
            </script>-->
        <script>
            function change(p,v) {
            var val=document.getElementById(v).value;
            var url= "/metadata/update?md="+md+"&ind="+ind+"&property="+p+"&value="+val;
                    $.get(url);
                };
               
        </script>
           <table>
            <tbody>
                <tr th:if="${OPlist.empty and DPlist.empty}">
                    <td colspan="2"> No Information Available </td>
                </tr>
                <tr th:each="dp, list : ${DPlist}">
                    <td><label th:text="${dp[0]+':   '}">  </label></td>
                    <td><input type="text" th:value="${dp[1]}" th:id="${list.index}"/></td>
                    <td> 
                        <!--<button type="button" th:onclick="'javascript:change('\' + ${dp[0]}+ '\',\'val'+${list.index}+'\')'">Change</button>-->
                        <button type="button" th:onclick="javascript:change([[${dp[0]}]],[[${list.index}]])">Change</button>
                    </td>
                </tr>
                <tr th:each="op : ${OPlist}">
                    <td><span th:text="${op[0]+':   '}">  </span></td>
                    <td><span th:text="${op[1]}"></span></td>
                    <td>    <form th:action="@{|/metadata/selected?md=${md}&indSon=${op[1]}|}" method="post">
                            <input type="submit" value="See"/>
                            </form>
                    </td>
                </tr>
                <tr>
                    <td>
                        <form th:action="@{/metadata/update}" method="post">
                            <input type="submit" value="JSON Downlift"/>
                            <!--<input type="submit" value="Metadata change"/>-->
                        </form>
                    </td>
                    <td>
                        <form th:action="@{|/metadata/downlift?md=${md}|}" method="post">
                                <input type="submit" value="XML Downlift"/>
                        </form>
                    </td>
                    <td></td>
                </tr>
            </tbody>
        </table>
            
    </body>
</html>